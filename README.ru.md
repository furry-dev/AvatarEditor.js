[Go back( Назад )](README.md)

# Avatar Editor

`AvatarEditor` — это JavaScript класс для создания интерактивного редактора аватаров с поддержкой масштабирования, перетаскивания изображения и маски.

## Инициализация

Добавьте класс `AvatarEditor` в свой проект.

## Использование

### Инициализация

```javascript
const canvas = document.getElementById('avatarCanvas')
const editor = new AvatarEditor(canvas, {
  scaleFactor: 1.1,
  maskW: 200,
  maskH: 200,
  maskStrokeWidth: 1,
  maskStrokeColor: '#ccc',
  maskOverflow: 'rgba(0, 0, 0, 0.6)',
  placeholder: "Choose an image by double-clicking",
  mask: "path/to/mask.png"
})
```

Настройки (Опционально)

При инициализации AvatarEditor вы можете предоставить дополнительный объект настроек со следующими свойствами:

* `scaleFactor` (по умолчанию: `1.1`): Множитель масштабирования изображения при увеличении или уменьшении масштаба.
* `maskW` (по умолчанию: `200`): Ширина маски.
* `maskH` (по умолчанию: `200`): Высота маски.
* `maskStrokeWidth` (по умолчанию: `1`): Ширина обводки (границ) вокруг маски.
* `maskStrokeColor` (по умолчанию: `'#ccc'`): Цвет обводки вокруг маски. Принимает `RGB`, `RGBA` или `HEX`.
* `maskOverflow` (по умолчанию: `'rgba(0, 0, 0, 0.6)'`): Цвет, представляющий затемненную область за пределами маски. Принимает `RGB`, `RGBA` или `HEX`.
* `placeholder` (по умолчанию: `"Выберите изображение двойным кликом"`): Текст, отображаемый в качестве заполнителя, когда изображение отсутствует.
* `mask` (по умолчанию: `undefined`): Путь к изображению, используемому в качестве маски. (Если не указать, маска не будет использоваться)

## Методы
`exportImage(format, quality)`

Экспортирует текущее изображение в редакторе в указанный формат. Если используется маска — экспортируется изображение внутри маски, если маска не выбрана — экспортируется всё изображение внутри холста.

* Параметры:
  * `format`: один из `"png"`, `"jpeg"`, `"bmp"` или `"webp"`.
  * `quality`: (необязательно): качество изображения (для `"jpeg"` или `"webp"`). Должно быть в диапазоне от `0` до `1`.

* Возвращает:
  * Строку data URL, представляющую изображение в указанном формате, или значение false, если изображение отсутствует.

## События

Редактор поддерживает следующие события:

* `dblclick`: Дважды щелкните, чтобы активировать ввод файла для выбора изображения.
* `mousedown`, `mouseup`, `mousemove`: Используется для перетаскивания изображения внутри холста.
* `wheel`: Используется для увеличения и уменьшения масштаба.
* `touchstart`, `touchmove`, `touchend`: Поддерживает сенсорные жесты для перетаскивания и масштабирования.

## License

Этот проект лицензируется по [MIT License](LICENSE) — подробности см. в файле LICENS.
